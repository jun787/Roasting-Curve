# 曲線圖繪製器

上傳 CSV 或 ZIP（內含 CSV），瀏覽器會自動解析並以 Canvas 繪製一張烘焙曲線 PNG，並在頁面下方預覽，可直接下載。所有文字介面為中文。

## K 值（FC 後發展段形狀指標）

本工具會在曲線圖下方的 **A/B/C 三段比例**右側顯示 **K 值**，用來快速判斷「一爆（1st CRACK）後到下豆（Drop）」這段發展段的**升溫形狀**是否偏正常。

### K 值代表什麼？
K 是把「FC 後升溫曲線的累積面積」做標準化後得到的數值：

- `K ≈ 1`：FC 後升溫接近線性（形狀乾淨）
- `K < 1`：前段偏慢（可能 crash / stall），後段才補回來
- `K > 1`：前段偏快，後段放緩（前段推進較多）

> K 用來看「形狀」，不是用來取代你的目標下豆溫度或風味判斷。

### 計算方式（不依賴公式渲染）
先定義幾個量：

- `t_FC`：一爆時間（秒），`t_Drop`：下豆/最後一筆時間（秒）
- `BT_FC`：FC 當下豆溫（°C），`BT_Drop`：下豆豆溫（°C）
- `ΔBT = BT_Drop - BT_FC`
- `C = (t_Drop - t_FC) / 60`（發展時間，分鐘）

接著計算「FC 後超額溫度面積」`I`（單位：°C·min）：

- 對 FC→Drop 的每個資料點，先做：
  - `y(t) = BT(t) - BT_FC`
- 用梯形積分累加：
  - `dt_min = (t[i+1] - t[i]) / 60`
  - `I += 0.5 * (y[i] + y[i+1]) * dt_min`

最後：

- `K = I / (0.5 * ΔBT * C)`

> 若缺少 `1st CRACK` 標記或 `ΔBT <= 0` 或 `C <= 0`，K 會顯示為 `K -`。

### 合理解讀範圍（只談形狀）
以下是「只看形狀」的快速判讀，實際仍建議以杯測回饋校正：

| K 值區間 | 常見形狀解讀 |
|---|---|
| 0.90 ～ 1.10 | 多數情況屬於形狀正常 |
| < 0.90 | 前段較容易 crash/stall，靠後段追溫度 |
| > 1.20 | 前段推進偏猛，後段放緩（留意苦感/控制風險） |

### 注意事項
K 在下列狀況容易失真，建議僅作參考：
- 發展段太短（例如 `< 60 秒`）
- FC 後實際走的溫度太少（例如 `ΔBT < 6°C`）


- 控制帶：火力與風門以虛線階梯線繪於圖底部，不超過整體高度 25%，數值映射 y = 檔位 × 5°C。
- 網格與刻度：左軸固定下限 0°C、每 10°C 虛線；右軸 RoR 5 對應 50°C 對齊（RoR=值×10）。
- 介面：中文提示、狀態訊息、按鈕，無額外浮框；提供 PNG 下載。
